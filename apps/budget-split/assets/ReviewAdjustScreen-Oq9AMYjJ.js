import{u as O,i as X,j as e,k as W,l as Z,v as J,r as u,b as Q,D as me,m as xe}from"./ui-vendor-D2FDxrtI.js";import{c as $,B as k}from"./button-C12IU9SF.js";import{S as he,P as pe,C as ue}from"./ProjectSummary-DkDj194v.js";import{A as ge}from"./alert-dialog-CUz0YfP6.js";import{u as fe}from"./index-Bwlh9LrA.js";import{c as je}from"./assignmentAlgorithm-D5_EMhQe.js";import{C as E,g as be}from"./CategoryChip-BXzsdSKX.js";import{G as U,j as ye,f as Y,a as B,l as Ne,X as ve,m as we,b as Ce,U as Se,n as Te,c as ke,o as De,R as ze,p as Le}from"./icons-DwHU0r-f.js";import"./react-vendor-DlBnNAMw.js";import"./charts-kvH0Okn1.js";import"./utils-B7X1E_CZ.js";const _=({task:t,compact:r=!1,isOverlay:s=!1})=>{const n=O({id:t.id}),{attributes:g,listeners:h,setNodeRef:d,transform:o,transition:m,isDragging:c}=s?{attributes:{},listeners:{},setNodeRef:()=>{},transform:null,transition:void 0,isDragging:!1}:n,j=s?{}:{transform:X.Transform.toString(o),transition:m,opacity:c?.5:1},x=t.quantity||1,w=t.price*x;return r?e.jsx("div",{ref:s?void 0:d,style:j,className:`border border-neutral-grey-medium p-2 bg-white rounded-lg ${s?"":"cursor-move hover:bg-primary/5 hover:border-primary transition-all duration-200"}`,...s?{}:{...g,...h},children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{size:14,className:"flex-shrink-0 text-text-muted"}),e.jsxs("div",{className:"flex-1 min-w-0 flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-xs truncate",children:t.name}),t.unbreakable&&x>1&&e.jsxs("span",{className:"text-xs text-blue-600 font-bold",children:["×",x]})]}),e.jsxs("span",{className:"text-xs font-semibold text-text-primary flex-shrink-0",children:[w.toLocaleString("vi-VN")," ₫"]})]})]})}):e.jsx("div",{ref:s?void 0:d,style:j,className:`border border-neutral-grey-medium p-3 bg-white rounded-lg ${s?"":"cursor-move hover:bg-primary/5 hover:border-primary transition-all duration-200"}`,...s?{}:{...g,...h},children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(U,{size:16,className:"flex-shrink-0 mt-1 text-text-muted"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("p",{className:"font-semibold text-sm truncate",children:t.name}),t.unbreakable&&x>1&&e.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 bg-blue-100 text-blue-800 text-xs font-bold border border-blue-600 rounded",children:["×",x]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(E,{category:t.category,size:"sm"}),e.jsxs("span",{className:"text-xs font-semibold text-text-primary",children:[w.toLocaleString("vi-VN")," ₫",x>1&&e.jsxs("span",{className:"text-text-secondary font-normal ml-1",children:["(",t.price.toLocaleString("vi-VN")," × ",x,")"]})]})]})]})]})})},H=({tasks:t})=>{const{setNodeRef:r,isOver:s}=W({id:"unassigned",data:{type:"unassigned"}});return e.jsxs("div",{ref:r,className:`border-2 border-dashed border-error/30 p-4 bg-error/5 transition-all duration-200 rounded-xl ${s?"bg-error/10 border-error/50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ye,{className:"text-red-600",size:24,strokeWidth:2}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Chưa phân công"}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[t.length," công việc"]})]})]}),e.jsx(Z,{items:t.map(n=>n.id),strategy:J,children:e.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:t.length===0?e.jsx("div",{className:"text-center py-8 text-text-secondary border border-dashed border-neutral-grey-medium bg-white rounded-lg",children:e.jsx("p",{className:"text-sm",children:"Tất cả công việc đã được phân công"})}):t.map(n=>e.jsx(_,{task:n},n.id))})})]})},Re=({tasks:t,assignments:r,getEmployeeName:s})=>{const[n,g]=u.useState(null),[h,d]=u.useState("asc"),[o,m]=u.useState(new Set),c=u.useMemo(()=>{const a=new Map;return t.forEach(i=>{const y=r.find(D=>D.taskId===i.id),b={...i,assignedTo:y?.employeeId};a.has(i.category)||a.set(i.category,{category:i.category,tasks:[],totalValue:0,color:be(i.category)});const v=a.get(i.category);v.tasks.push(b),v.totalValue+=i.price*(i.quantity||1)}),Array.from(a.values()).sort((i,y)=>i.category.localeCompare(y.category))},[t,r]),j=a=>n?[...a].sort((i,y)=>{let b=0;switch(n){case"name":b=i.name.localeCompare(y.name);break;case"price":b=i.price-y.price;break;case"employee":const v=i.assignedTo?s(i.assignedTo):"",D=y.assignedTo?s(y.assignedTo):"";b=v.localeCompare(D);break}return h==="asc"?b:-b}):a,x=a=>{n===a?d(h==="asc"?"desc":"asc"):(g(a),d("asc"))},w=a=>{const i=new Set(o);i.has(a)?i.delete(a):i.add(a),m(i)},z=c.reduce((a,i)=>a+i.totalValue,0),l=t.length,p=({column:a})=>n!==a?null:e.jsx("span",{className:"ml-1 inline-block",children:h==="asc"?"↑":"↓"});return e.jsx("div",{className:"overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto border border-neutral-grey-medium rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primary text-white",children:[e.jsxs("th",{className:"px-4 py-3 text-left text-sm font-semibold cursor-pointer hover:bg-primary-dark transition-colors duration-200",onClick:()=>x("name"),children:["Tên công việc ",e.jsx(p,{column:"name"})]}),e.jsxs("th",{className:"px-4 py-3 text-left text-sm font-semibold cursor-pointer hover:bg-primary-dark transition-colors duration-200",onClick:()=>x("employee"),children:["Nhân sự ",e.jsx(p,{column:"employee"})]}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"SL"}),e.jsxs("th",{className:"px-4 py-3 text-right text-sm font-semibold cursor-pointer hover:bg-primary-dark transition-colors duration-200",onClick:()=>x("price"),children:["Giá trị ",e.jsx(p,{column:"price"})]})]})}),e.jsxs("tbody",{children:[c.map(a=>{const i=o.has(a.category),y=j(a.tasks);return e.jsxs(Q.Fragment,{children:[e.jsx("tr",{className:"cursor-pointer hover:bg-neutral-grey-light",onClick:()=>w(a.category),children:e.jsx("td",{colSpan:5,className:"px-4 py-3 text-sm bg-primary/10 border-t-2 border-primary font-semibold",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i?e.jsx(Y,{size:20}):e.jsx(B,{size:20}),e.jsx(E,{category:a.category,size:"md"}),e.jsxs("span",{children:["(",a.tasks.length," công việc)"]})]}),e.jsxs("span",{className:"text-sm",children:["Tổng: ",a.totalValue.toLocaleString("vi-VN")," ₫"]})]})})}),!i&&y.map(b=>e.jsx(Ve,{task:b,employeeName:b.assignedTo?s(b.assignedTo):"Chưa phân công"},b.id))]},a.category)}),e.jsxs("tr",{className:"bg-primary text-white border-t-4 border-primary",children:[e.jsxs("td",{colSpan:3,className:"px-4 py-3 text-sm font-semibold text-left",children:["Tổng cộng (",l," công việc)"]}),e.jsxs("td",{className:"px-4 py-3 text-sm font-semibold text-white text-right",children:[z.toLocaleString("vi-VN")," ₫"]})]})]})]})})})},Ve=({task:t,employeeName:r})=>{const s=t.quantity||1,n=t.price*s;return e.jsxs("tr",{className:"border-t border-neutral-grey-medium hover:bg-neutral-grey-light",children:[e.jsxs("td",{className:"px-4 py-3 text-sm",children:[t.name,t.unbreakable&&s>1&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 bg-blue-100 text-blue-800 text-xs font-bold border border-blue-600 rounded",children:"Không chia nhỏ"})]}),e.jsx("td",{className:"px-4 py-3 text-sm text-text-primary",children:r}),e.jsx("td",{className:"px-4 py-3 text-sm text-center",children:s>1?s:"-"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right font-semibold",children:[n.toLocaleString("vi-VN")," ₫",s>1&&e.jsxs("span",{className:"block text-xs text-text-secondary font-normal",children:["(",t.price.toLocaleString("vi-VN")," × ",s,")"]})]})]})},Ae=({employees:t,assignments:r,tasks:s,collapsedEmployees:n,onToggleEmployee:g})=>{const h=u.useMemo(()=>t.map(d=>{const m=r.filter(j=>j.employeeId===d.id).map(j=>s.find(x=>x.id===j.taskId)).filter(Boolean),c=m.reduce((j,x)=>j+x.price*(x.quantity||1),0);return{employee:d,tasks:m,totalValue:c}}),[t,r,s]);return e.jsx("div",{className:"overflow-hidden border border-neutral-grey-medium rounded-lg",children:e.jsxs("table",{className:"w-full bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primary text-white",children:[e.jsx("th",{className:"w-12 px-3 py-3 text-left text-sm font-semibold"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Nhân sự"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Đề mục"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"SL"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Giá trị"})]})}),e.jsx("tbody",{children:h.map(({employee:d,tasks:o,totalValue:m})=>e.jsx(Ee,{employee:d,employeeTasks:o,totalValue:m,isCollapsed:n.has(d.id),onToggleEmployee:g},d.id))})]})})},Ee=({employee:t,employeeTasks:r,totalValue:s,isCollapsed:n,onToggleEmployee:g})=>{const{setNodeRef:h,isOver:d}=W({id:`employee-table-${t.id}`,data:{type:"employee",employeeId:t.id}}),o=t.moneyCap?s<t.moneyCap:!1,m=t.moneyCap?Math.max(t.moneyCap-s,0):null;return e.jsxs(Q.Fragment,{children:[e.jsxs("tr",{ref:h,className:`cursor-pointer border-t border-neutral-grey-medium ${d?"bg-primary/10":o?"bg-amber-50":"bg-primary/5"}`,onClick:()=>g(t.id),children:[e.jsx("td",{className:"px-3 py-3 text-center align-middle",children:n?e.jsx(Y,{size:18}):e.jsx(B,{size:18})}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold align-middle",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-primary text-white flex items-center justify-center",children:e.jsx(Ne,{size:18})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-text-primary",children:t.name}),e.jsx("div",{className:"text-xs text-text-secondary",children:t.moneyCap?`Hạn mức: ${t.moneyCap.toLocaleString("vi-VN")} ₫${m&&m>0?` / Còn lại: ${m.toLocaleString("vi-VN")} ₫`:""}`:"Không hạn mức"})]})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-text-secondary align-middle",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:t.categories.map(c=>e.jsx(E,{category:c,size:"sm"},c))})}),e.jsx("td",{className:"px-4 py-3 text-sm text-center align-middle",children:r.reduce((c,j)=>c+(j.quantity||1),0)}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right font-semibold align-middle",children:[s.toLocaleString("vi-VN")," ₫"]})]}),!n&&e.jsx(Z,{items:r.map(c=>c.id),strategy:J,children:r.length===0?e.jsxs("tr",{className:"border-t border-neutral-grey-medium",children:[e.jsx("td",{}),e.jsx("td",{colSpan:4,className:"px-4 py-4 text-sm text-text-muted",children:"Chưa có công việc"})]}):r.map(c=>e.jsx(Ie,{task:c},c.id))})]})},Ie=({task:t})=>{const{attributes:r,listeners:s,setNodeRef:n,transform:g,transition:h,isDragging:d}=O({id:t.id}),o={transform:X.Transform.toString(g),transition:h,opacity:d?.6:1},m=t.quantity||1,c=t.price*m;return e.jsxs("tr",{ref:n,style:o,className:"border-t border-neutral-grey-medium hover:bg-neutral-grey-light",children:[e.jsx("td",{className:"px-3 py-3 text-center align-middle",children:e.jsx("button",{type:"button",className:"inline-flex items-center justify-center w-8 h-8 rounded-lg border border-neutral-grey-medium bg-white hover:bg-primary/10",...r,...s,"aria-label":"Kéo để di chuyển",children:e.jsx(U,{size:16,className:"text-text-muted"})})}),e.jsx("td",{className:"px-4 py-3 text-sm text-text-primary align-middle",children:t.name}),e.jsx("td",{className:"px-4 py-3 text-sm align-middle",children:e.jsx(E,{category:t.category,size:"sm"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-center align-middle",children:m>1?m:"-"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right font-semibold align-middle",children:[c.toLocaleString("vi-VN")," ₫",m>1&&e.jsxs("span",{className:"block text-xs text-text-secondary font-normal",children:["(",t.price.toLocaleString("vi-VN")," × ",m,")"]})]})]})};function Me({className:t,type:r,label:s,error:n,helperText:g,id:h,...d}){const o=h||(s?`input-${s.toLowerCase().replace(/\s+/g,"-")}`:void 0);return e.jsxs("div",{className:"flex flex-col gap-2",children:[s&&e.jsx("label",{htmlFor:o,className:"text-sm font-medium text-text-primary",children:s}),e.jsx("input",{id:o,type:r,"data-slot":"input",className:$("px-4 py-3 bg-white border border-neutral-grey-medium text-text-primary placeholder:text-text-muted rounded-md","focus:outline-none focus:border-primary focus:shadow-colored transition-all duration-200","hover:shadow-colored hover:border-primary/50",n&&"border-error",t),"aria-invalid":n?"true":"false","aria-describedby":n?`${o}-error`:g?`${o}-helper`:void 0,...d}),n&&e.jsx("p",{id:o?`${o}-error`:void 0,className:"text-sm text-red-600",role:"alert",children:n}),!n&&g&&e.jsx("p",{id:o?`${o}-helper`:void 0,className:"text-sm text-text-secondary",children:g})]})}const qe=({options:t,values:r,onChange:s,placeholder:n="Chọn mục...",className:g})=>{const[h,d]=u.useState(!1),[o,m]=u.useState(""),c=u.useRef(null);u.useEffect(()=>{const l=p=>{c.current&&!c.current.contains(p.target)&&d(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]);const j=u.useMemo(()=>t.filter(l=>r.includes(l.value)),[t,r]),x=u.useMemo(()=>{if(!o.trim())return t;const l=o.toLowerCase();return t.filter(p=>p.label.toLowerCase().includes(l))},[t,o]),w=l=>{const p=r.includes(l)?r.filter(a=>a!==l):[...r,l];s(p)},z=l=>{s(r.filter(p=>p!==l))};return e.jsxs("div",{ref:c,className:$("relative w-full",g),children:[e.jsx(k,{variant:"outline",role:"combobox","aria-expanded":h,className:"h-9 w-full justify-between border border-neutral-grey-medium bg-white px-3",onClick:()=>d(l=>!l),children:e.jsxs("div",{className:"flex w-full items-center gap-2 overflow-hidden",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-x-1.5 gap-y-2 flex-1 overflow-hidden py-0.5",children:j.length===0?e.jsx("span",{className:"truncate text-sm font-medium text-left text-text-muted",children:n}):j.map(l=>e.jsxs("span",{className:"inline-flex items-center gap-1.5 rounded-full border border-neutral-grey-medium bg-neutral-grey-light/80 px-2.5 py-0.5 text-xs font-medium text-text-primary",onMouseDown:p=>{p.stopPropagation(),p.preventDefault()},children:[e.jsx("span",{className:"truncate max-w-[140px]",children:l.label}),e.jsx("button",{type:"button","aria-label":`Bỏ chọn ${l.label}`,onClick:p=>{p.stopPropagation(),p.preventDefault(),z(l.value)},className:"text-text-muted hover:text-text-primary",children:e.jsx(ve,{className:"h-3 w-3"})})]},l.value))}),e.jsx(we,{className:"h-4 w-4 shrink-0 opacity-50"})]})}),h&&e.jsxs("div",{className:"absolute left-0 top-11 z-20 w-[280px] rounded-md border border-neutral-grey-medium bg-white shadow-lg",children:[e.jsx("div",{className:"p-2 border-b border-neutral-grey-medium",children:e.jsx(Me,{value:o,onChange:l=>m(l.target.value),placeholder:"Tìm kiếm nhân sự...",className:"h-9"})}),e.jsxs("div",{className:"max-h-64 overflow-y-auto",children:[x.length===0&&e.jsx("div",{className:"px-3 py-2 text-sm text-text-muted",children:"Không có kết quả"}),x.map(l=>{const p=r.includes(l.value);return e.jsxs("button",{type:"button",className:"flex w-full items-center gap-2 px-3 py-2 text-left text-sm hover:bg-neutral-grey-light",onClick:()=>w(l.value),children:[e.jsx(Ce,{className:$("h-4 w-4",p?"opacity-100":"opacity-0")}),e.jsx("span",{children:l.label})]},l.value)})]})]})]})},Qe=()=>{const{employees:t,tasks:r,assignments:s,getBudget:n,assignTask:g,unassignTask:h,undo:d,redo:o,assignmentHistory:m,historyIndex:c,setAssignments:j,assignmentResult:x,nextStep:w,prevStep:z,getUnassignedTasks:l}=fe(),p=n(),[a,i]=u.useState(null),[y,b]=u.useState(null),[v,D]=u.useState("employee"),[ee,G]=u.useState(!1),[R,te]=u.useState([]),[V,I]=u.useState(new Set),L=u.useMemo(()=>R.length===0?t:t.filter(f=>R.includes(f.id)),[t,R]),se=u.useMemo(()=>t.map(f=>({value:f.id,label:f.name})),[t]),re=f=>{I(C=>{const N=new Set(C);return N.has(f)?N.delete(f):N.add(f),N})},ne=()=>{I(new Set)},ae=()=>{I(new Set(L.map(f=>f.id)))},le=f=>{const C=r.find(N=>N.id===f.active.id);i(C||null),b(null)},ie=f=>{const{active:C,over:N}=f;i(null);const S=C.id,K=r.find(T=>T.id===S);if(!K)return;if(!N){s.find(A=>A.taskId===S)&&h(S);return}const M=N.data.current;if(M?.type==="unassigned"){h(S);return}if(M?.type==="employee"){const T=M.employeeId,A=t.find(q=>q.id===T);if(!A)return;const P=je(K,A,s,r,p);if(!P.valid){b(P.reason||"Không thể phân công công việc này"),setTimeout(()=>b(null),3e3);return}if(s.find(q=>q.taskId===S)?.employeeId===T)return;g(S,T);return}s.find(T=>T.taskId===S)&&h(S)},oe=async()=>{G(!0)},ce=c>0,de=c<m.length-1,F=l();return e.jsx("div",{className:"min-h-screen flex flex-col items-center px-6 py-12",children:e.jsxs("div",{className:"w-full max-w-full md:max-w-[85%]",children:[e.jsx(he,{currentStep:4,totalSteps:5,onPrev:z,onNext:w,nextLabel:"Xuất kết quả"}),e.jsx(pe,{}),e.jsxs(ue,{children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-2",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Xem xét & Điều chỉnh"}),e.jsxs("div",{className:"border border-neutral-grey-medium bg-white inline-flex rounded-lg overflow-hidden",children:[e.jsxs(k,{variant:v==="employee"?"default":"ghost",size:"sm",onClick:()=>D("employee"),className:"rounded-none border-0",title:"Bảng theo nhân sự",children:[e.jsx(Se,{}),e.jsx("span",{className:"hidden sm:inline ml-2",children:"Nhân sự"})]}),e.jsxs(k,{variant:v==="category"?"default":"ghost",size:"sm",onClick:()=>D("category"),className:"rounded-none border-0 border-l border-neutral-grey-medium",title:"Bảng theo đề mục",children:[e.jsx(Te,{}),e.jsx("span",{className:"hidden sm:inline ml-2",children:"Đề mục"})]})]})]}),v==="employee"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-base mb-6 text-text-secondary",children:"Kéo thả công việc để điều chỉnh phân công"}),e.jsxs("div",{className:"mb-4 flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:e.jsx(k,{variant:"secondary",size:"sm",onClick:()=>{V.size===L.length?ne():ae()},title:V.size===L.length?"Mở rộng tất cả":"Thu gọn tất cả",children:V.size===L.length?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Mở rộng"]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Thu gọn"]})})}),e.jsx("div",{className:"flex-1 min-w-[240px]",children:e.jsx(qe,{options:se,values:R,onChange:te,placeholder:"Chọn nhân sự cần xem",className:"w-full"})}),e.jsxs("div",{className:"flex gap-2 items-center flex-wrap justify-end",children:[e.jsx(k,{variant:"secondary",size:"icon",onClick:d,disabled:!ce,title:"Hoàn tác",children:e.jsx(De,{})}),e.jsx(k,{variant:"secondary",size:"icon",onClick:o,disabled:!de,title:"Làm lại",children:e.jsx(ze,{})}),e.jsx(k,{variant:"secondary",size:"icon",onClick:oe,title:"Đặt lại",children:e.jsx(Le,{})})]})]})]}),y&&e.jsx("div",{className:"mb-4 bg-error/10 border border-error/30 text-error p-4 rounded-lg",children:e.jsx("p",{className:"font-semibold",children:y})}),e.jsxs(me,{onDragStart:le,onDragEnd:ie,children:[v==="employee"?e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx(Ae,{employees:L,assignments:s,tasks:r,collapsedEmployees:V,onToggleEmployee:re}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg mb-3",children:"Chưa phân công"}),e.jsx(H,{tasks:F})]})]}):e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsx(Re,{tasks:r.filter(f=>s.some(C=>C.taskId===f.id)),assignments:s,getEmployeeName:f=>t.find(N=>N.id===f)?.name||"Unknown"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg mb-3",children:"Chưa phân công"}),e.jsx(H,{tasks:F})]})]}),e.jsx(xe,{children:a?e.jsx(_,{task:a,compact:!0,isOverlay:!0}):null})]})]}),e.jsx(ge,{open:ee,onOpenChange:G,title:"Đặt lại kết quả",description:"Bạn có chắc muốn đặt lại về kết quả ban đầu?",confirmText:"Đặt lại",cancelText:"Giữ nguyên",onConfirm:()=>{x&&j(x.assignments)}})]})})};export{Qe as ReviewAdjustScreen};
