import{j as t,b as N,r as T}from"./ui-vendor-D2FDxrtI.js";import{c as l}from"./charts-kvH0Okn1.js";import{u as A}from"./index-Bwlh9LrA.js";import{c as S,B as b}from"./button-C12IU9SF.js";import{t as V,H as $,A as L,U as B,u as w,k as f,q as j,s as k}from"./icons-DwHU0r-f.js";function P({className:r,...s}){return t.jsx("div",{"data-slot":"card",className:S("bg-white border border-neutral-grey-medium shadow-subtle p-8 rounded-xl",r),...s})}const R=["welcome","employee-import","task-import","auto-assign","review-adjust","export"],I=({currentStep:r,totalSteps:s,onPrev:x,onNext:p,canGoPrev:C=!0,canGoNext:d=!0,showStartNew:g=!1,onStartNew:c,nextLabel:e,startNewLabel:h="Dự án mới"})=>{const n=A(i=>i.setCurrentStep),u=i=>{if(i===1||i<=r){const m=R[i];m&&n(m)}};return t.jsxs("div",{className:"flex flex-row flex-nowrap items-center justify-between gap-3 md:gap-4 mb-8 overflow-x-auto pb-1",children:[t.jsx("div",{className:"flex-shrink-0",children:x&&t.jsx(b,{variant:"primary",onClick:x,disabled:!C,icon:V,"aria-label":"Quay lại",className:"[&>span]:hidden",children:t.jsx("span",{className:"sr-only",children:"Quay lại"})})}),t.jsx("div",{className:"flex items-center justify-center gap-2 md:gap-3 lg:gap-4 flex-nowrap flex-1 min-w-fit",children:Array.from({length:s},(i,m)=>{const a=m+1,o=a===r,y=a<r,v=a===1||a<=r;return t.jsxs(N.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2 whitespace-nowrap",children:[t.jsx("button",{onClick:()=>u(a),disabled:!v,className:l("w-10 h-10 flex items-center justify-center border font-semibold flex-shrink-0 transition-all duration-200 ease-in-out rounded-full",o&&"bg-primary text-white border-primary shadow-subtle cursor-pointer",y&&"bg-primary/20 text-primary border-primary hover:bg-primary/30 hover:border-primary/80 cursor-pointer",!o&&!y&&"bg-white text-text-muted border-neutral-grey-medium cursor-not-allowed",v&&!o&&!y&&"cursor-pointer hover:bg-primary/10 hover:border-primary/50 hover:text-primary"),"aria-current":o?"step":void 0,"aria-label":`Step ${a} of ${s}`,children:a}),t.jsxs("span",{className:"text-sm font-medium hidden sm:inline",children:["Step ",a]})]}),a<s&&t.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-neutral-grey-medium flex-shrink-0"})]},a)})}),t.jsx("div",{className:"flex-shrink-0",children:g&&c?t.jsx(b,{variant:"primary",onClick:c,icon:$,children:h}):p?t.jsx(b,{variant:"primary",onClick:p,disabled:!d,icon:L,iconPosition:"right",children:e||"Tiếp tục"}):null})]})},Q=()=>{const{employees:r,assignments:s,getBudget:x,getTotalAssignedValue:p,getUnassignedTasks:C}=A(),d=x(),g=p(),c=C(),e=T.useMemo(()=>{const n=s.length,u=d-g,i=c.length,m=c.reduce((a,o)=>a+o.price*(o.quantity||1),0);return{employeeCount:r.length,totalCapacity:d,assignedTaskCount:n,assignedAmount:g,remainingCapacity:u,remainingTaskCount:i,remainingAmount:m}},[r.length,d,s.length,g,c]),h=[{label:"Nhân sự",value:e.employeeCount.toString(),icon:B,accentColor:"bg-blue-500",textColor:"text-blue-900",iconColor:"text-blue-700"},{label:"Tổng định mức",value:`${e.totalCapacity.toLocaleString("vi-VN")} ₫`,icon:w,accentColor:"bg-purple-500",textColor:"text-purple-900",iconColor:"text-purple-700"},{label:"Định mức còn lại",value:`${e.remainingCapacity.toLocaleString("vi-VN")} ₫`,icon:w,accentColor:e.remainingCapacity>=0&&e.remainingCapacity>e.totalCapacity*.2?"bg-emerald-500":e.remainingCapacity>0?"bg-yellow-500":"bg-red-500",textColor:e.remainingCapacity>=0&&e.remainingCapacity>e.totalCapacity*.2?"text-emerald-900":e.remainingCapacity>0?"text-yellow-900":"text-red-900",iconColor:e.remainingCapacity>=0&&e.remainingCapacity>e.totalCapacity*.2?"text-emerald-700":e.remainingCapacity>0?"text-yellow-700":"text-red-700"},{label:"Đã phân công",value:`${e.assignedTaskCount} tasks`,subValue:`${e.assignedAmount.toLocaleString("vi-VN")} ₫`,icon:f,accentColor:"bg-green-500",textColor:"text-green-900",iconColor:"text-green-700"},{label:"Tasks còn lại",value:e.remainingTaskCount.toString(),icon:e.remainingTaskCount===0?f:e.remainingTaskCount<=e.assignedTaskCount*.2?j:k,accentColor:e.remainingTaskCount===0?"bg-green-500":e.remainingTaskCount<=e.assignedTaskCount*.2?"bg-yellow-500":"bg-red-500",textColor:e.remainingTaskCount===0?"text-green-900":e.remainingTaskCount<=e.assignedTaskCount*.2?"text-yellow-900":"text-red-900",iconColor:e.remainingTaskCount===0?"text-green-700":e.remainingTaskCount<=e.assignedTaskCount*.2?"text-yellow-700":"text-red-700"},{label:"Tiền còn lại",value:`${e.remainingAmount.toLocaleString("vi-VN")} ₫`,icon:e.remainingAmount===0?f:e.remainingAmount<=e.assignedAmount*.2?j:k,accentColor:e.remainingAmount===0?"bg-green-500":e.remainingAmount<=e.assignedAmount*.2?"bg-yellow-500":"bg-red-500",textColor:e.remainingAmount===0?"text-green-900":e.remainingAmount<=e.assignedAmount*.2?"text-yellow-900":"text-red-900",iconColor:e.remainingAmount===0?"text-green-700":e.remainingAmount<=e.assignedAmount*.2?"text-yellow-700":"text-red-700"}];return t.jsx("div",{className:"w-full mb-6",children:t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 md:gap-5",children:h.map((n,u)=>{const i=n.icon;return t.jsxs(P,{className:"relative flex w-full items-center gap-4 p-4 md:p-5 shadow-subtle overflow-hidden border-2",children:[t.jsx("span",{className:l("absolute left-0 top-0 h-full w-2 rounded-l-xl",n.accentColor)}),t.jsx("div",{className:"flex items-center gap-3 pl-1",children:t.jsx("div",{className:l("flex h-10 w-10 items-center justify-center rounded-lg border-2 bg-white",n.accentColor,"bg-opacity-10"),"aria-hidden":!0,children:t.jsx(i,{size:20,className:l(n.iconColor)})})}),t.jsxs("div",{className:"flex flex-col items-start gap-1",children:[t.jsx("span",{className:l("text-xs font-semibold uppercase tracking-wide",n.textColor),children:n.label}),t.jsx("div",{className:l("text-xl font-bold leading-tight",n.textColor),children:n.value}),n.subValue&&t.jsx("div",{className:l("text-sm text-neutral-700",n.textColor),children:n.subValue})]})]},u)})})})};export{P as C,Q as P,I as S};
